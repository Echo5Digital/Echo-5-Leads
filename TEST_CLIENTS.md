# Test Clients & API Keys
**Created: November 13, 2025**

## ðŸŽ‰ Test Clients Successfully Created!

### Client 1: Open Arms Foster Care
- **Tenant ID**: `506ff4cf-0226-44a0-90d3-c2ed12965bf4`
- **Slug**: `open-arms`
- **API Key**: `open_523e0520a0fd927169f2fb0a14099fb2`
- **SLA Hours**: 24
- **Manager Email**: manager@openarmsfoster.org
- **Website**: https://openarmsfoster.org
- **Spam Keywords**: viagra, casino, loan, crypto

### Client 2: Caring Hearts Agency
- **Tenant ID**: `c305159c-acc6-4c00-b2f8-462f3a449d85`
- **Slug**: `caring-hearts`
- **API Key**: `caring_f8b1676f6bdedaf4190cef75129b4201`
- **SLA Hours**: 48 (longer response time)
- **Manager Email**: admin@caringhearts.com
- **Website**: https://caringhearts.com
- **Spam Keywords**: spam, viagra, casino

### Client 3: Family First Foster Care
- **Tenant ID**: `32750356-5cda-406a-b2e8-05bcc9d7ae5a`
- **Slug**: `family-first`
- **API Key**: `family_ed44dd58739b941b93c1591b8441384a`
- **SLA Hours**: 24
- **Manager Email**: info@familyfirst.org
- **Website**: https://familyfirst.org
- **Spam Keywords**: viagra, loan

---

## ðŸ”§ Management Commands

### View all tenants and API keys:
```bash
cd backend
npm run list-keys
```

### Create more test clients:
```bash
cd backend
npm run create-clients
```

### Test API endpoints:
```bash
# Test with Open Arms API key
curl -H "X-Tenant-Key: open_523e0520a0fd927169f2fb0a14099fb2" \
  http://localhost:3001/api/leads

# Test with Caring Hearts API key
curl -H "X-Tenant-Key: caring_f8b1676f6bdedaf4190cef75129b4201" \
  http://localhost:3001/api/leads

# Test with Family First API key
curl -H "X-Tenant-Key: family_ed44dd58739b941b93c1591b8441384a" \
  http://localhost:3001/api/leads
```

---

## ðŸŽ¯ Next Steps

1. **Update Frontend API Key** (to test with a specific client):
   ```bash
   cd frontend
   # Edit .env.local and change NEXT_PUBLIC_API_KEY to one of the keys above
   ```

2. **Test Tenant Switcher**:
   - Open http://localhost:3000
   - Click on the tenant dropdown in the sidebar
   - You should see all 3 clients listed
   - Switch between them to see data isolation

3. **Create Test Leads** for each client:
   ```bash
   cd backend
   # Use test-ingest.js with different API keys
   export TEST_TENANT_KEY=open_523e0520a0fd927169f2fb0a14099fb2
   npm run test:ingest
   ```

4. **Test API Key Management UI**:
   - Go to http://localhost:3000/clients
   - Click on any client
   - Go to "Manage Keys" tab
   - Create additional API keys
   - Test revocation

---

## ðŸ”’ Security Notes

- API keys are hashed with SHA-256 + pepper before storage
- Raw keys are shown **only once** at creation
- Keys cannot be recovered if lost (must create new key)
- Revoked keys cannot be reactivated (create new key instead)
- Each tenant's data is isolated by `tenantId` in all queries

---

## ðŸ“Š Testing Multi-Tenant Features

### Tenant Isolation Test:
1. Create leads using different API keys
2. Verify each tenant only sees their own leads
3. Check analytics are separate per tenant

### SLA Monitoring Test:
1. Create old leads (manually update `latestActivityAt` in DB)
2. Wait for cron job or check manually
3. Verify overdue alerts appear per tenant

### API Key Revocation Test:
1. Create a new API key via UI
2. Use it to make API calls (should work)
3. Revoke the key via UI
4. Try API calls again (should fail with 401)

---

**Generated by**: Echo5 Leads Platform Setup Script
